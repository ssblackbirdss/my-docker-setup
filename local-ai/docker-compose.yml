services:
  ollama:
    image: ollama/ollama:latest
    container_name: ollama
    volumes:
      - ollama_data:/root/.ollama
    ports:
      - "11434:11434"
    restart: unless-stopped

  openwebui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: open-webui
    depends_on:
      - ollama
    ports:
      - "3000:8080"
    volumes:
      - openwebui_data:/app/backend/data
      - ./whisper_models:/app/backend/whisper-models   # host folder for Whisper models
    environment:
      OLLAMA_BASE_URL: "http://ollama:11434"
      ENABLE_API_KEYS: "true"
      USER_PERMISSIONS_FEATURES_API_KEYS: "true"

      # --- Whisper / STT settings (local Whisper)
      AUDIO_STT_ENGINE: ""
      WHISPER_MODEL: "small"                   # tiny / base / small / medium / large
      WHISPER_MODEL_DIR: "/app/backend/whisper-models"
      WHISPER_LANGUAGE: ""                 
    restart: unless-stopped

  kokoro:
    image: ghcr.io/remsky/kokoro-fastapi-cpu:latest
    container_name: kokoro
    ports:
      - "8880:8880"
    restart: unless-stopped

volumes:
  ollama_data:
  openwebui_data:
