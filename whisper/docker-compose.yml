version: "3.8"

services:
  whisper:
    build: .
    image: whisper-official-cpu:latest
    restart: "no"
    volumes:
      - ./audio:/audio
      - whisper_cache:/root/.cache/whisper
    environment:
      WHISPER_MODEL: "medium"        # change if desired
      WHISPER_LANGUAGE: "fa"        # optional default language (remove or set to "" for auto-detect)
    # No hard-coded 'command' here; the container will run the entrypoint script which auto-detects audio.
volumes:
  whisper_cache:
